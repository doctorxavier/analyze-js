@using IDB.Presentation.MVC4.Helpers

@model IList<IDB.MW.Domain.Models.Security.FieldAccessModel>
@{
    var rand = new Random();
    var rowId = rand.Next(1000000, 3000000);
    var txtSubTableSwich = SecurityHelper.IsVisible(Model, "txtSubTable");
    var ddlTypeStorySwich = SecurityHelper.IsVisible(Model, "ddlTypeStory");
    var txtElectronicLinkSwich = SecurityHelper.IsVisible(Model, "txtElectronicLink");
}

<tr data-id="@rowId" class="custom-even" role="row">
    <td class="hide" data-pagemode="edit">
        <input type="hidden" name="storiesId" value="0">
    </td>
    @if (ddlTypeStorySwich)
    { 
        <td data-pagemode="edit">
            @Confluence.InputDropDown(null, "typeStory", ViewBag.TypeStory, width: "100%", dataAttributes: new Dictionary<string, string>() { { "idb-fieldname", "ddlTypeStory" } })
        </td>
    }

    @if (txtElectronicLinkSwich)
    { 
    <td data-pagemode="edit">
        @Confluence.InputText(null, "electronicLink", 500, width: "100%", required: false, dataAttributes: new Dictionary<string, string>() { { "idb-fieldname", "txtElectronicLink" } })
    </td>
    }
    <td data-pagemode="edit" class="w130">
        @Confluence.ButtonShowRow(true)
        @Confluence.ButtonTrash(null, null, "removeRow2")
    </td>
</tr>
<tr class="template odd" role="row" data-is-expanded="true" style="display:table-row;" data-last-detail="true" data-row-parent-id="@rowId">
    <td class="custom-detail-table-row" colspan="4">
        <div class="row row-header text-left">
            <div class="col-md-1">
                <p></p>
            </div>
            <div class="col-md-10">
                <p>@Localization.GetText("TCM.FR.FindingsAndRecommendations.TextFieldRow")</p>
            </div>
            <div class="col-md-1">
                <p></p>
            </div>
        </div>
        <div class="row row-body-40 text-left">
            <div data-pagemode="read" class="hide">
                <div class="col-md-1">
                </div>
                <div class="col-md-10"></div>
                <div class="col-md-1">
                </div>
            </div>
            <div data-pagemode="edit">
                <div class="col-md-1">
                </div>
                @if (txtSubTableSwich)
                {
                    <div class="col-md-10">
                        @Confluence.InputRichText(null, "storiesArea", required: true, width: "100%", height: "100px", dataAttributes: new Dictionary<string, string>() { { "idb-fieldname", "txtSubTable" } }, maxLength: 3500)
                    </div>
                }
                
                <div class="col-md-1">
                </div>
            </div>
        </div>
    </td>
</tr>